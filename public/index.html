<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kanbangular</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/dragula.min.css">
</head>

<body ng-app= "app">
  <div class="main">
    <header>
      <h1>KANBANGULAR</h1>
    </header>
    <div ng-controller="tasksController">
      <div id="addNew">
        <form ng-show="show">
          <fieldset>
            <div>
              <label for="Title">Task Title:</label>
              <input type="text" id="Title" ng-model="newTask.title">
            </div>
            <div>
              <label for="Description">Description:</label>
              <input type="text" id="Description" ng-model="newTask.description">
            </div>
            <div>
              <label for="dueDate">Due Date:</label>
              <input type="text" id="dueDate" ng-model="newTask.dueDate">
            </div>
            <div>
              <label for="Priority">Priority</label>
              <input type="text" id="Priority" ng-model="newTask.priority">
            </div>
            <div>
              <label for="Status">Status:</label>
              <input type="text" id="Status" ng-model="newTask.status" >
            </div>
            <div>
              <button type="button" ng-click="show=false; addTask(newTask)">Submit</button>
            </div>
          </fieldset>
        </form>
        <button type="button" ng-click="show=true" ng-hide="show">Add Task</button>
      </div>

      <div id="board">
        <div id="notStarted" dragula="'status-bag'"> <!-- Starts Not Started Section -->
          <h3>Not Started</h3>
          <div class="CARD" ng-repeat="task in tasks | filter:status='notstarted' | orderBy: 'priority'">
            <div ng-hide="showme">
              <p>Title: {{ task.title }}</p>
              <p>Description: {{ task.description }}</p>
              <p>Due Date: {{ task.dueDate }}</p>
              <p>Priority: {{ task.priority }}</p>
              <button class="editButton" ng-click="showme=true" ng-hide="showme">Edit</button>
            </div>
            <!-- Hidden Edit Form -->
            <form ng-show="showme">
              <input type="hidden" id="{{ $index }}" ng-model="task.id">
              <label for="title">Title:</label>
              <input type="text" id="title" ng-model="task.title">
              <br>
              <label for="description">Description:</label>
              <input type="text" id="description" ng-model="task.description">
              <br>
              <label for="dueDate">Due Date:</label>
              <input type="text" id="dueDate" ng-model="task.dueDate">
              <br>
              <label for="priority">Priority:</label>
              <input type="text" id="priority" ng-model="task.priority">
              <br>
              <input type="hidden" id="status" ng-model="task.status">
            </form>
            <button class="saveButton" ng-click="showme=false; saveTask(task)" ng-show="showme">Save</button>
            <button class="deleteButton" ng-click="showme=false; deleteTask(task)" ng-show="showme">Delete</button>
          </div> <!-- card -->
        </div> <!-- notstarted -->


        <div id="inProgress" dragula="'status-bag'"> <!-- Starts Not Started Section -->
          <h3>Not Started</h3>
          <div class="CARD" ng-repeat="task in tasks | filter:status='inprogress' | orderBy: 'priority'">
            <div ng-hide="showme">
              <p>Title: {{ task.title }}</p>
              <p>Description: {{ task.description }}</p>
              <p>Due Date: {{ task.dueDate }}</p>
              <p>Priority: {{ task.priority }}</p>
              <button class="editButton" ng-click="showme=true" ng-hide="showme">Edit</button>
            </div>
            <!-- Hidden Edit Form -->
            <form ng-show="showme">
              <input type="hidden" id="{{ $index }}" ng-model="task.id">
              <label for="title">Title:</label>
              <input type="text" id="title" ng-model="task.title">
              <br>
              <label for="description">Description:</label>
              <input type="text" id="description" ng-model="task.description">
              <br>
              <label for="dueDate">Due Date:</label>
              <input type="text" id="dueDate" ng-model="task.dueDate">
              <br>
              <label for="priority">Priority:</label>
              <input type="text" id="priority" ng-model="task.priority">
              <br>
              <input type="hidden" id="status" ng-model="task.status">
            </form>
            <button class="saveButton" ng-click="showme=false; saveTask(task)" ng-show="showme">Save</button>
            <button class="deleteButton" ng-click="showme=false; deleteTask(task)" ng-show="showme">Delete</button>
          </div> <!-- card -->
        </div> <!-- notstarted -->


        <div id="completed" dragula="'status-bag'"> <!-- Starts Not Started Section -->
          <h3>Not Started</h3>
          <div class="CARD" ng-repeat="task in tasks | filter:status='completed' | orderBy: 'priority'">
            <div ng-hide="showme">
              <p>Title: {{ task.title }}</p>
              <p>Description: {{ task.description }}</p>
              <p>Due Date: {{ task.dueDate }}</p>
              <p>Priority: {{ task.priority }}</p>
              <button class="editButton" ng-click="showme=true" ng-hide="showme">Edit</button>
            </div>
            <!-- Hidden Edit Form -->
            <form ng-show="showme">
              <input type="hidden" id="{{ $index }}" ng-model="task.id">
              <label for="title">Title:</label>
              <input type="text" id="title" ng-model="task.title">
              <br>
              <label for="description">Description:</label>
              <input type="text" id="description" ng-model="task.description">
              <br>
              <label for="dueDate">Due Date:</label>
              <input type="text" id="dueDate" ng-model="task.dueDate">
              <br>
              <label for="priority">Priority:</label>
              <input type="text" id="priority" ng-model="task.priority">
              <br>
              <input type="hidden" id="status" ng-model="task.status">
            </form>
            <button class="saveButton" ng-click="showme=false; saveTask(task)" ng-show="showme">Save</button>
            <button class="deleteButton" ng-click="showme=false; deleteTask(task)" ng-show="showme">Delete</button>
          </div> <!-- card -->
        </div> <!-- notstarted -->

      </div> <!-- Ends Board -->
    </div> <!-- Ends Controller -->
  </div> <!-- Ends Main -->


  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular-route.min.js"></script>
  <script type="text/javascript" src="/js/dragula.js"></script>
  <script type="text/javascript" src="/js/app.js"></script>
  <script type="text/javascript" src="/js/services.js"></script>
  <script type="text/javascript" src="/js/controllers/tasksController.js"></script>
</body>
</html>